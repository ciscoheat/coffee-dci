(function(){var b,c,a;c=typeof exports!=="undefined"&&exports!==null?exports:window;c.Ivento||(c.Ivento={});(a=c.Ivento).Dci||(a.Dci={});c.Ivento.Dci.Context=b=(function(){function d(e){this.__contextProperty=e}d.prototype.bind=function(e){return d.bind(this,e,this.__contextProperty)};d.isFunction=function(e){return !!(e&&e.constructor&&e.call&&e.apply)};d.isObject=function(e){return e!==null&&typeof e==="object"};d.bind=function(f,i,h){var g,j,e;if(h==null){h="context"}f.__contextCacheId||(f.__contextCacheId=0);j=++f.__contextCacheId;f.__contextCache||(f.__contextCache={});(e=f.__contextCache)[j]||(e[j]={});g=f.__contextCache;return{to:function(v){var n,o,p,q,r,s,t,u,w,x,k,l,m;w=null;if(v._contract!=null){m=v._contract;for(k=0,l=m.length;k<l;k++){u=m[k];if(!(u in i)){throw"RolePlayer "+i+" didn't fulfill Role Contract with property '"+u+"'."}}}p=function(y){if(!(g[j]!=null)){throw"Object for "+i+" not found in context cache."}return g[j][y]};x=function(y,z){return g[j][y]=z};t=function(y,z){return z!=="constructor"&&z!=="_contract"&&y.hasOwnProperty(z)};q=function(){return f.unbind!=null};r=function(A){var z,y;y=[];for(u in A){z=A[u];if(t(A,u)){if(d.isFunction(z)){y.push(z.__contextMethod=true)}else{if(d.isObject(z)){y.push(r(z))}else{y.push(void 0)}}}}return y};n=function(y){return function(){var z,A,B;B=p(y);z=arguments.callee.caller;if(!B||(z.__contextMethod!=null)){A=v[y]}else{A=B}return A.apply(i,arguments)}};o=function(z,A){var y;if(A==null){A=null}y=i.hasOwnProperty(z)?i[z]:false;x(z,y);return i[z]=A!=null?A:n(z)};if(!q()){r(f.constructor.prototype)}for(u in v){s=v[u];if(t(v,u)){o(u)}}o(h,f);if(!q()){f.unbind=function(){var y,z;for(z in g){for(u in g[z]){y=g[z][u];if(y){i[u]=y}else{delete i[u]}}}f[w]=f.constructor.prototype[w];return delete f.unbind}}for(u in f){s=f[u];if(s===v){w=u;f[u]=i;return}}throw"Role for RolePlayer not found in Context."}}};return d})()}).call(this);