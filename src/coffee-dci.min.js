(function(){var b,c,a;c=typeof exports!=="undefined"&&exports!==null?exports:window;c.Ivento||(c.Ivento={});(a=c.Ivento).Dci||(a.Dci={});c.Ivento.Dci.Context=b=(function(){function d(){}d.prototype.bind=function(e){return d.bind(this,e)};d.bind=function(f,q){var g,h,i,j,k,l,m,n,o,p,e;j=function(r){return !!(r&&r.constructor&&r.call&&r.apply)};k=function(r){return r!==null&&typeof r==="object"};m=function(r){return k(r)};i=function(r){return r[0]!=="_"&&r!=="constructor"&&j(f[r])};l=function(s,r){return s[0]!=="_"&&s!=="constructor"&&j(r)};g=function(r){return function(){return f.constructor.prototype[r].apply(f,arguments)}};if(!(f.__methodBound!=null)){f.__methodBound=true;e=f.constructor.prototype;for(n in e){h=e[n];if(i(n)){f.constructor.prototype[n].__contextMethod=true;f[n]=g(n)}else{if(m(h)){for(p in h){o=h[p];if(l(p,o)){f.constructor.prototype[n][p].__contextMethod=n}}}}}}return{to:function(B,y){var z,A,C,D,E,r,s,t,u,v,w,x;if(y==null){y="context"}E=null;for(n in f){h=f[n];if(h===B){E=n;break}}if(!E){throw"Role for RolePlayer not found in Context."}if(B._contract!=null){v=B._contract;for(r=0,t=v.length;r<t;r++){n=v[r];if(!(n in q)){throw"RolePlayer "+q+" didn't fulfill Role Contract with property '"+n+"'."}}}C=function(){var F;F=(function(){var G,H;G=f.constructor.prototype[E];H=[];for(n in G){h=G[n];if(l(n,h)){H.push(n)}}return H})();if(B._contract!=null){F=F.concat(B._contract)}return F};z=function(G,H,F){return function(){var I,J;q[y]=f;J=arguments.callee.caller.__contextMethod;I=J===true||J===E;if((H!=null)&&!(F!=null)){return f.constructor.prototype[E][G].apply(q,arguments)}if((F!=null)&&!(H!=null)){return F.apply(q,arguments)}if(H&&F){if(I){return f.constructor.prototype[E][G].apply(q,arguments)}else{return F.apply(q,arguments)}}throw"No Role Method or Object Method '"+G+"' found."}};D=typeof q;f[E]=D==="boolean"||D==="number"||D==="string"?q:{};w=C();x=[];for(s=0,u=w.length;s<u;s++){n=w[s];o=f.constructor.prototype[E][n];A=q[n];f[E][n]=z(n,o,A);if(o&&A){x.push(q[n]=f[E][n])}else{x.push(void 0)}}return x}}};return d})()}).call(this);