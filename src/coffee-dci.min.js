(function(){var b,c,a;c=typeof exports!=="undefined"&&exports!==null?exports:window;c.Ivento||(c.Ivento={});(a=c.Ivento).Dci||(a.Dci={});c.Ivento.Dci.Context=b=(function(){function d(e){this.__contextProperty=e}d.prototype.bind=function(e){return d.bind(this,e,this.__contextProperty)};d.isFunction=function(e){return !!(e&&e.constructor&&e.call&&e.apply)};d.isObject=function(e){return e!==null&&typeof e==="object"};d.bind=function(f,i,h){var g,j,e;if(h==null){h="context"}f.__contextCacheId||(f.__contextCacheId=0);j=++f.__contextCacheId;f.__contextCache||(f.__contextCache={});(e=f.__contextCache)[j]||(e[j]={});g=f.__contextCache;return{to:function(w){var n,o,p,q,r,s,t,u,v,x,y,k,l,m;x=null;for(v in f){t=f[v];if(t===w){x=v;f[v]=i;break}}if(!x){throw"Role for RolePlayer not found in Context."}p=function(z){if(!(g[j]!=null)){throw"Object for "+i+" not found in context cache."}return g[j][z]};y=function(z,A){return g[j][z]=A};u=function(z,A){return A!=="constructor"&&A!=="_contract"&&z.hasOwnProperty(A)};q=function(){return f.unbind!=null};r=function(){return f.constructor.prototype[x]};s=function(A,B){var z;z=[];for(v in A){t=A[v];if(u(A,v)){if(!t.__contextMethod&&d.isFunction(t)){z.push(t.__contextMethod=B?x:true)}else{if(v===x){z.push(s(t,true))}else{z.push(void 0)}}}}return z};n=function(z){return function(){var A,B,C;C=p(z);A=arguments.callee.caller.__contextMethod;if(!C||A===true||A===x){B=w[z]}else{B=C}return B.apply(i,arguments)}};o=function(A,B){var z;if(B==null){B=null}z=i.hasOwnProperty(A)?i[A]:false;y(A,z);return i[A]=B!=null?B:n(A)};if(w._contract!=null){m=w._contract;for(k=0,l=m.length;k<l;k++){v=m[k];if(!(v in i)){throw"RolePlayer "+i+" didn't fulfill Role Contract with property '"+v+"'."}}}s(f.constructor.prototype,false);for(v in w){t=w[v];if(u(w,v)){o(v)}}o(h,f);if(!q()){return f.unbind=function(){var z,A;for(A in g){for(v in g[A]){z=g[A][v];if(z){i[v]=z}else{delete i[v]}}}f[x]=f.constructor.prototype[x];return delete f.unbind}}}}};return d})()}).call(this);